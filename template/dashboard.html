<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Complex Table — Tailwind + HTML + CSS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Tailwind config tweaks (optional) — adds custom colors and enables forms plugin if you build locally
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: "#1f7a8c",
              cold: "#eef6f9",
              gold: "#f6c85f",
            },
          },
        },
      };
    </script>
    <style>
      /* Extra styles for the table that complement Tailwind classes */
      .table-fixed-layout table {
        table-layout: fixed;
      }
      .sticky-top {
        position: sticky;
        top: 0;
        z-index: 20;
      }
      .row-detail {
        background: linear-gradient(
          90deg,
          rgba(31, 122, 140, 0.03),
          rgba(246, 200, 95, 0.02)
        );
      }
      /* beautify the scrollbar for wide tables */
      .scroll-x::-webkit-scrollbar {
        height: 10px;
      }
      .scroll-x::-webkit-scrollbar-thumb {
        background: rgba(15, 23, 42, 0.12);
        border-radius: 999px;
      }
      /* small responsive tweaks */
      @media (max-width: 820px) {
        .hide-sm {
          display: none;
        }
      }
    </style>
  </head>
  <body class="bg-cold text-slate-800 antialiased p-6">
    <div class="max-w-7xl mx-auto">
      <header class="flex items-center justify-between mb-6">
        <div>
          <h1 class="text-2xl font-semibold">Advanced Data Table</h1>
          <p class="text-sm text-slate-500">
            Tailwind CSS — multi-row headers, sticky header, expandable rows,
            badges, progress bars, sorting
          </p>
        </div>
        <div class="flex items-center gap-3">
          <label class="text-sm text-slate-600">Search</label>
          <input
            id="search"
            type="search"
            placeholder="Search name or matric no..."
            class="px-3 py-2 rounded-md border border-slate-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-brand"
          />
        </div>
      </header>

      <section class="bg-white rounded-2xl shadow-lg overflow-hidden">
        <!-- Toolbar -->
        <div
          class="flex items-center justify-between gap-4 p-4 border-b border-slate-100"
        >
          <div class="flex items-center gap-2">
            <button
              id="addRow"
              class="inline-flex items-center gap-2 px-3 py-2 bg-brand text-white rounded-md shadow-sm hover:opacity-95"
            >
              +
            </button>
            <button id="exportCSV" class="px-3 py-2 border rounded-md text-sm">
              Export CSV
            </button>
            <div class="text-sm text-slate-500">
              Showing <span id="rowsCount" class="font-semibold">8</span> rows
            </div>
          </div>

          <div class="flex items-center gap-3">
            <label class="text-sm text-slate-600">Rows</label>
            <select id="pageSize" class="px-2 py-1 rounded-md border">
              <option>5</option>
              <option selected>10</option>
              <option>25</option>
            </select>
          </div>
        </div>

        <!-- Table area (horizontally scrollable on small screens) -->
        <div class="overflow-x-auto scroll-x">
          <div class="min-w-[1100px] table-fixed-layout">
            <table class="w-full text-sm">
              <!-- Multi-level header -->
              <thead class="sticky-top bg-white">
                <tr class="border-b">
                  <th rowspan="2" class="w-12 p-3 text-left">#</th>
                  <th colspan="2" class="p-3 text-left">Identity</th>
                  <th colspan="3" class="p-3 text-left hide-sm">Academic</th>
                  <th rowspan="2" class="w-36 p-3 text-left">Contact</th>
                  <th rowspan="2" class="w-48 p-3 text-left">Skills</th>
                  <th colspan="2" class="p-3 text-left">Status</th>
                  <th rowspan="2" class="w-40 p-3 text-left">Actions</th>
                </tr>
                <tr class="text-xs text-slate-500">
                  <th class="p-2 pl-6">Name</th>
                  <th class="p-2">Matric No</th>
                  <th class="p-2 hide-sm">Department</th>
                  <th class="p-2 hide-sm">Faculty</th>
                  <th class="p-2 hide-sm">Institution</th>
                  <th class="p-2">Progress</th>
                  <th class="p-2">State</th>
                </tr>
              </thead>
              <tbody id="tbody" class="divide-y">
                <!-- Row 1 -->
                <tr class="hover:bg-slate-50">
                  <td class="p-3">1</td>
                  <td class="p-3 flex items-center gap-3">
                    <img
                      class="w-10 h-10 rounded-md object-cover"
                      src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' width='80' height='80'><rect width='100%' height='100%' rx='8' fill='%231f7a8c'/><text x='50%' y='55%' font-family='Arial' font-size='28' fill='white' text-anchor='middle'>AJ</text></svg>"
                      alt="AJ"
                    />
                    <div>
                      <div class="font-semibold">Abdulmalik Jemilat Oyiza</div>
                      <div class="text-xs text-slate-500">DOB: 26/11/1999</div>
                    </div>
                  </td>
                  <td class="p-3">FT23HIM0764</td>
                  <td class="p-3 hide-sm">Health Information Management</td>
                  <td class="p-3 hide-sm">
                    College of Medicine & Allied Health Sciences
                  </td>
                  <td class="p-3 hide-sm">Nasarawa State University, Keffi</td>
                  <td class="p-3">
                    08125760219<br /><span class="text-xs text-slate-500"
                      >jemilatabdulmalik19@gmail.com</span
                    >
                  </td>
                  <td class="p-3">
                    <div class="flex flex-wrap gap-2">
                      <span class="px-2 py-1 bg-slate-100 rounded-full text-xs"
                        >Computer programming</span
                      >
                    </div>
                  </td>
                  <td class="p-3">
                    <div class="w-28">
                      <div class="text-xs font-semibold mb-1">Onboarding</div>
                      <div
                        class="w-full bg-slate-100 rounded-full h-2 overflow-hidden"
                      >
                        <div
                          class="h-2 rounded-full"
                          style="
                            width: 70%;
                            background: linear-gradient(
                              90deg,
                              #1f7a8c,
                              #f6c85f
                            );
                          "
                        ></div>
                      </div>
                    </div>
                  </td>
                  <td class="p-3">
                    <span
                      class="inline-flex items-center px-2 py-1 rounded-full bg-emerald-100 text-emerald-800 text-xs"
                      >Active</span
                    >
                  </td>
                  <td class="p-3">
                    <div class="flex gap-2">
                      <button class="px-3 py-1 rounded-md border text-xs">
                        View
                      </button>
                      <button
                        class="px-3 py-1 rounded-md bg-brand text-white text-xs"
                      >
                        Message
                      </button>
                    </div>
                  </td>
                </tr>

                <!-- Expandable detail row (hidden by default) -->
                <tr class="row-detail hidden" data-parent="1">
                  <td colspan="12" class="p-4">
                    <div class="grid grid-cols-3 gap-4">
                      <div>
                        <div class="text-xs text-slate-500">Address</div>
                        <div class="font-medium">
                          Back of Kakky, High-Court, Keffi, Nasarawa State
                        </div>
                      </div>
                      <div>
                        <div class="text-xs text-slate-500">Short Bio</div>
                        <div class="font-medium">
                          A Health Information Management student with interest
                          in applying programming skills to healthcare data
                          systems.
                        </div>
                      </div>
                      <div>
                        <div class="text-xs text-slate-500">Notes</div>
                        <div class="font-medium">
                          Available for projects and internships. Prefers
                          backend/data roles.
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>

                <!-- Additional sample rows (2..8) -->
                <script type="text/template" id="row-template">
                  <tr class="hover:bg-slate-50">
                    <td class="p-3">{{idx}}</td>
                    <td class="p-3 flex items-center gap-3">
                      <div class="w-10 h-10 rounded-md bg-slate-100 flex items-center justify-center text-slate-600">{{initials}}</div>
                      <div>
                        <div class="font-semibold">{{name}}</div>
                        <div class="text-xs text-slate-500">DOB: {{dob}}</div>
                      </div>
                    </td>
                    <td class="p-3">{{matric}}</td>
                    <td class="p-3 hide-sm">{{dept}}</td>
                    <td class="p-3 hide-sm">{{faculty}}</td>
                    <td class="p-3 hide-sm">{{inst}}</td>
                    <td class="p-3">{{phone}}<br/><span class="text-xs text-slate-500">{{email}}</span></td>
                    <td class="p-3">
                      <div class="flex flex-wrap gap-2">
                        {{skills}}
                      </div>
                    </td>
                    <td class="p-3">
                      <div class="w-28">
                        <div class="text-xs font-semibold mb-1">{{progressTitle}}</div>
                        <div class="w-full bg-slate-100 rounded-full h-2 overflow-hidden">
                          <div class="h-2 rounded-full" style="width:{{progressPercent}}%; background: linear-gradient(90deg,#1f7a8c,#f6c85f)"></div>
                        </div>
                      </div>
                    </td>
                    <td class="p-3">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs {{stateClass}}">{{state}}</span>
                    </td>
                    <td class="p-3">
                      <div class="flex gap-2">
                        <button class="px-3 py-1 rounded-md border text-xs">View</button>
                        <button class="px-3 py-1 rounded-md bg-brand text-white text-xs">Message</button>
                      </div>
                    </td>
                  </tr>

                  <tr class="row-detail hidden" data-parent="{{idx}}">
                    <td colspan="12" class="p-4">
                      <div class="grid grid-cols-3 gap-4">
                        <div>
                          <div class="text-xs text-slate-500">Address</div>
                          <div class="font-medium">{{address}}</div>
                        </div>
                        <div>
                          <div class="text-xs text-slate-500">Short Bio</div>
                          <div class="font-medium">{{bio}}</div>
                        </div>
                        <div>
                          <div class="text-xs text-slate-500">Notes</div>
                          <div class="font-medium">{{notes}}</div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </script>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Pagination + controls -->
        <div
          class="flex items-center justify-between gap-4 p-4 border-t bg-white"
        >
          <div class="text-sm text-slate-500">
            Page <strong id="currentPage">1</strong> of
            <strong id="totalPages">1</strong>
          </div>
          <div class="flex items-center gap-2">
            <button id="prevPage" class="px-3 py-1 border rounded-md">
              Prev
            </button>
            <button id="nextPage" class="px-3 py-1 border rounded-md">
              Next
            </button>
          </div>
        </div>
      </section>

      <footer class="mt-4 text-xs text-slate-500">
        Tip: Click any row to expand details. Use the search box to filter rows.
      </footer>
    </div>

    <script>
      // Sample data for the extra rows
      const sample = [
        {
          name: "Aisha Ibrahim",
          initials: "AI",
          matric: "FT23HIM0002",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "10/04/2000",
          phone: "08012345678",
          email: "aisha@example.com",
          skills: ["Data entry", "Excel"],
          progress: 55,
          progressTitle: "Records",
          state: "Active",
          stateClass: "bg-emerald-100 text-emerald-800",
          address: "Lokoja",
          bio: "Focused on analytics",
          notes: "Good with Excel",
        },
        {
          name: "Babatunde Olawale",
          initials: "BO",
          matric: "FT23HIM0003",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "21/07/1998",
          phone: "08098765432",
          email: "baba@example.com",
          skills: ["Python", "SQL"],
          progress: 85,
          progressTitle: "Project",
          state: "Active",
          stateClass: "bg-emerald-100 text-emerald-800",
          address: "Abuja",
          bio: "Enjoys backend dev",
          notes: "Available remotely",
        },
        {
          name: "Chidera Okonkwo",
          initials: "CO",
          matric: "FT23HIM0004",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "05/01/2001",
          phone: "08000111222",
          email: "chidera@example.com",
          skills: ["R", "Statistics"],
          progress: 40,
          progressTitle: "Analysis",
          state: "Pending",
          stateClass: "bg-amber-100 text-amber-800",
          address: "Enugu",
          bio: "Statistics enthusiast",
          notes: "Seeking research assistant role",
        },
        {
          name: "Daniel E.",
          initials: "DE",
          matric: "FT23HIM0005",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "16/09/2000",
          phone: "08022223333",
          email: "daniel@example.com",
          skills: ["JavaScript"],
          progress: 95,
          progressTitle: "Capstone",
          state: "Completed",
          stateClass: "bg-sky-100 text-sky-800",
          address: "Lagos",
          bio: "Front-end dev",
          notes: "Open to internship",
        },
        {
          name: "Emmanuella",
          initials: "EM",
          matric: "FT23HIM0006",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "12/12/1999",
          phone: "08044445555",
          email: "emma@example.com",
          skills: ["SQL", "Python"],
          progress: 10,
          progressTitle: "Orientation",
          state: "Inactive",
          stateClass: "bg-rose-100 text-rose-800",
          address: "Keffi",
          bio: "New student",
          notes: "Needs guidance",
        },
        {
          name: "Femi Akorede",
          initials: "FA",
          matric: "FT23HIM0007",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "30/03/1997",
          phone: "08066667777",
          email: "femi@example.com",
          skills: ["C#", "Databases"],
          progress: 72,
          progressTitle: "Midterm",
          state: "Active",
          stateClass: "bg-emerald-100 text-emerald-800",
          address: "Jos",
          bio: "Database focus",
          notes: "Experienced",
        },
        {
          name: "Grace Nwosu",
          initials: "GN",
          matric: "FT23HIM0008",
          dept: "Health Info Mgmt",
          faculty: "Medicine",
          inst: "Nasarawa State Univ",
          dob: "08/02/1998",
          phone: "08088889999",
          email: "grace@example.com",
          skills: ["Research", "SPSS"],
          progress: 62,
          progressTitle: "Survey",
          state: "Active",
          stateClass: "bg-emerald-100 text-emerald-800",
          address: "Owerri",
          bio: "Research oriented",
          notes: "Great communicator",
        },
      ];

      // Function to render rows into tbody
      function renderRows() {
        const tbody = document.getElementById("tbody");
        // Remove any rows after the first 2 (we already have 1 sample and its detail)
        // Clear everything and re-add row 1 manually, then append others
        tbody.innerHTML = tbody.querySelectorAll("tr")[0];
      }

      // Instead of complex templating lib, we'll manually append using template
      (function populate() {
        const tmpl = document.getElementById("row-template").innerHTML;
        const tbody = document.getElementById("tbody");
        sample.forEach((s, i) => {
          const idx = i + 2; // since row 1 exists
          let skills = s.skills
            .map(
              (k) =>
                `<span class=\"px-2 py-1 bg-slate-100 rounded-full text-xs\">${k}</span>`
            )
            .join("");
          let row = tmpl
            .replace(/{{idx}}/g, idx)
            .replace(/{{initials}}/g, s.initials)
            .replace(/{{name}}/g, s.name)
            .replace(/{{dob}}/g, s.dob)
            .replace(/{{matric}}/g, s.matric)
            .replace(/{{dept}}/g, s.dept)
            .replace(/{{faculty}}/g, s.faculty)
            .replace(/{{inst}}/g, s.inst)
            .replace(/{{phone}}/g, s.phone)
            .replace(/{{email}}/g, s.email)
            .replace(/{{skills}}/g, skills)
            .replace(/{{progressTitle}}/g, s.progressTitle)
            .replace(/{{progressPercent}}/g, s.progress)
            .replace(/{{state}}/g, s.state)
            .replace(/{{stateClass}}/g, s.stateClass)
            .replace(/{{address}}/g, s.address)
            .replace(/{{bio}}/g, s.bio)
            .replace(/{{notes}}/g, s.notes);
          tbody.insertAdjacentHTML("beforeend", row);
        });

        // update row count
        document.getElementById("rowsCount").textContent = 1 + sample.length;
        document.getElementById("totalPages").textContent = 1;

        // make rows clickable to toggle details
        document
          .querySelectorAll("#tbody > tr:not(.row-detail)")
          .forEach((r) => {
            r.addEventListener("click", () => {
              const idx = r.querySelector("td").textContent.trim();
              const next = document.querySelector(
                `tr.row-detail[data-parent=\"${idx}\"]`
              );
              if (next) {
                next.classList.toggle("hidden");
              }
            });
          });

        // search filter
        document.getElementById("search").addEventListener("input", (e) => {
          const q = e.target.value.toLowerCase();
          document.querySelectorAll("#tbody > tr").forEach((r, i) => {
            if (r.classList.contains("row-detail")) return; // ignore details
            const text = r.innerText.toLowerCase();
            const visible = text.includes(q);
            r.style.display = visible ? "" : "none";
            // hide/show associated detail row
            const idx = r.querySelector("td").textContent.trim();
            const det = document.querySelector(
              `tr.row-detail[data-parent=\"${idx}\"]`
            );
            if (det) det.style.display = visible ? "" : "none";
          });
        });
      })();

      // Simple CSV export (based on visible rows only)
      document.getElementById("exportCSV").addEventListener("click", () => {
        const rows = Array.from(
          document.querySelectorAll("#tbody > tr")
        ).filter(
          (r) =>
            !r.classList.contains("row-detail") && r.style.display !== "none"
        );
        const csv = [];
        csv.push(
          [
            "#",
            "Name",
            "Matric",
            "Department",
            "Faculty",
            "Institution",
            "Phone",
            "Email",
            "Skills",
            "Progress",
            "State",
          ].join(",")
        );
        rows.forEach((r) => {
          const cols = r.querySelectorAll("td");
          const name = cols[1].innerText.replace(/\n/g, " ").trim();
          const matric = cols[2].innerText.trim();
          const dept = cols[3].innerText.trim();
          const faculty = cols[4].innerText.trim();
          const inst = cols[5].innerText.trim();
          const contact = cols[6].innerText.replace(/\n/g, " | ").trim();
          const skills = Array.from(cols[7].querySelectorAll("span"))
            .map((s) => s.innerText)
            .join("|");
          const progress = cols[8].innerText.replace(/\n/g, " ").trim();
          const state = cols[9].innerText.trim();
          csv.push(
            [
              cols[0].innerText.trim(),
              `"${name}"`,
              matric,
              `"${dept}"`,
              `"${faculty}"`,
              `"${inst}"`,
              `"${contact}"`,
              `"${skills}"`,
              `"${progress}"`,
              state,
            ].join(",")
          );
        });
        const blob = new Blob([csv.join("\n")], { type: "text/csv" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "table-export.csv";
        a.click();
        URL.revokeObjectURL(url);
      });

      // Add Row (demo) — appends a sample row
      document.getElementById("addRow").addEventListener("click", () => {
        alert(
          "This demo button would open a modal to add a new row. Implement as needed."
        );
      });
    </script>
  </body>
</html>
